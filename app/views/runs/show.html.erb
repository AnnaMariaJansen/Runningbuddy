<div class="container mt-3 justify-content-center">
  <h1>Run by <%= @creator.email %></h1> <!-- change to name once implemented -->
  <img src="https://liveatnolan.com/wp-content/uploads/2018/06/Placeholder-Map.jpg" alt="placeholder map" class="map">
</div>
<hr>
<div class="container mt-3"></div>
  <ul>
    <li><h5>Run details</h5></li>
    <li><h6>Date: <%= @run.date %></h6></li>
    <li><h6>Location: <%= @run.location %></h6></li>
    <li><h6>Route: <%= @run.route %></h6></li>
    <li><h6>Length: <%= @run.length %></h6></li>
    <li><h6>Pace: <%= @run.pace %></h6></li>
    <li><h6>Duration: <%= @run.duration %></h6></li>
  </ul>
  <%= button_to 'Join!', { controller: "meetings", action: "create", run_id: @run.id, user_id: current_user , method: :post }, class: "button-green ml-5" %>
</div>
<hr>
<ul class="">
  <h4>Already joining:</h4>
  <% @meetings.sort.each do |meeting|%>
  <li class="mb-2">
    <% user = User.find(meeting.user_id) %>
    <%= image_tag "https://kitt.lewagon.com/placeholder/users/arthur-littm", class: "avatar-large", alt: "avatar-large" %>
    <%= user.email + " also joined the run"%> |  <!-- change to name once implemented -->
    <%= meeting.status %>
    <!-- extend to only allowing it when user is involved -->
    <% can_cancel = meeting.status != "cancelled" %>
    <!-- extend to only allowing it to creator -->
    <% can_confirm = meeting.status == "pending" %>
    <!-- extend to only allowing this to user who deleted it previously -->
    <% can_undo = meeting.status == "cancelled" %>
    <% if can_cancel %>
      <%= link_to 'cancel run', run_meeting_path(meeting.run, meeting, status: "cancelled"), method: :patch, data: { confirm: "Are you sure?" } %>
    <% end %>
    <% if can_confirm %>
      <%= link_to 'confirm run', run_meeting_path(meeting.run, meeting, status: "confirmed"), method: :patch %>
    <% end %>
    <% if can_undo %>
      <%= link_to 'undo', run_meeting_path(meeting.run, meeting, status: "pending"), method: :patch %>
    <% end %>
  <% end %>
  </li>
</ul>

<hr>

